<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perform-Bulk-Reference-Uploads • DSbulkUploadR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Perform-Bulk-Reference-Uploads">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DSbulkUploadR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_Overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/02_Generate-the-Input-File.html">Generate the Input File</a>
    </li>
    <li>
      <a href="../articles/03_Populating-the-Input-File.html">Populating the Input File</a>
    </li>
    <li>
      <a href="../articles/04_Perform-Bulk-Reference-Uploads.html">Perform-Bulk-Reference-Uploads</a>
    </li>
    <li>
      <a href="../articles/05_Data-Validation-Checks-Performed.html">Data Validation Checks Performed</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nationalparkservice/DSbulkUploadR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Perform-Bulk-Reference-Uploads</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nationalparkservice/DSbulkUploadR/blob/HEAD/vignettes/articles/04_Perform-Bulk-Reference-Uploads.Rmd" class="external-link"><code>vignettes/articles/04_Perform-Bulk-Reference-Uploads.Rmd</code></a></small>
      <div class="hidden name"><code>04_Perform-Bulk-Reference-Uploads.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Once you have finished filling out your input.xlsx file, you are
ready to create references on DataStore! It can be quite easy to make
hundreds or even thousands of references so if this is the first time
you have used this package please consider testing a subset of your
input.xlsx file using the development server.</p>
</div>
<div class="section level2">
<h2 id="testing-on-the-development-server">Testing on the development server<a class="anchor" aria-label="anchor" href="#testing-on-the-development-server"></a>
</h2>
<p>To test your input.xlsx file on the development server, you should
consider truncating the input.xlsx file and limiting it to just a few
rows (references) to create. Save this truncated version with a new name
and pass it to the <code><a href="../reference/bulk_reference_generation.html">bulk_reference_generation()</a></code> function
while setting the <code>dev</code> parameter to <code>TRUE</code>. You
will also need to specify which sheet within the xlxs you want to use to
generate references on DataStore:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>dev_refs <span class="ot">&lt;-</span> <span class="fu">bulk_reference_generation</span>(<span class="at">filename =</span> <span class="st">"truncated_input.xlsx"</span>,</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                                      <span class="at">path =</span> <span class="fu">getwd</span>(),</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                                      <span class="at">sheet =</span> <span class="st">"AudioRecording"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                                      <span class="at">dev =</span> <span class="cn">TRUE</span>)<span class="er">)</span></span></code></pre></div>
<p>Once the function has run, you can look at your draft references on
the <a href="https://irmadev.nps.gov/DataStore/" class="external-link">DataStore development
server</a> to make sure everything is copasetic. Make any necessary
adjustments to your full input.xlsx file before using it with the
<code><a href="../reference/bulk_reference_generation.html">bulk_reference_generation()</a></code> with the <code>dev</code>
parameter set to <code>FALSE</code>.</p>
<p>You may want to check the object <code>dev_refs</code> to see a list
of the newly created reference numbers, which has been added to the
information you supplied in your <code>truncated_input.xlsx</code>
file.</p>
</div>
<div class="section level2">
<h2 id="create-references-already">Create references already!<a class="anchor" aria-label="anchor" href="#create-references-already"></a>
</h2>
<p>Creating references is the easy part! Run the following line of code
to supply your full (not truncated) input.xlsx file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>new_refs <span class="ot">&lt;-</span> <span class="fu">bulk_reference_generation</span>(<span class="at">filename =</span> <span class="st">"DSbulkUplaodR_input.xlsx"</span>,</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>                          <span class="at">path =</span> <span class="fu">getwd</span>(),</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>                          <span class="at">sheet =</span> <span class="st">"AudioRecording"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>                          <span class="at">dev =</span> <span class="cn">FALSE</span>)<span class="er">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="address-errors-and-warnings">Address errors and warnings<a class="anchor" aria-label="anchor" href="#address-errors-and-warnings"></a>
</h3>
<p>If the data validation steps in the
<code><a href="../reference/bulk_reference_generation.html">bulk_reference_generation()</a></code> function produced any errors,
you will have to address those before proceeding. See the <a href="05_Data-Validation-Checks.html">Data Validation Checks</a>
vignette for additional information on these tests and how to fix your
input.xlsx file.</p>
</div>
<div class="section level3">
<h3 id="increase-file-numbers-and-sizes">Increase file numbers and sizes<a class="anchor" aria-label="anchor" href="#increase-file-numbers-and-sizes"></a>
</h3>
<p>For safety’s sake, the <code><a href="../reference/bulk_reference_generation.html">bulk_reference_generation()</a></code>
function has a setting for the maximum allowable number of files and
volume of data that can be uploaded during a single operation. These
defaults are 500 files and 10 GB. You can increase the allowable upload
file number and size above the default settings by changing those
parameters (see the documentation for
<code>bulk_reference_geneartion()</code>). For instance, to increase the
maximum file number to 5,000 and the maximum volume of data to 500 GB,
you would run the following code:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>new_refs <span class="ot">&lt;-</span> <span class="fu">bulk_reference_generation</span>(<span class="at">filename =</span> <span class="st">"DSbulkUploadR_input.xlsx"</span>,</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>                          <span class="at">path =</span> <span class="fu">getwd</span>(),</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                          <span class="at">sheet =</span> <span class="st">"AudioRecording"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                          <span class="at">max_file_upload =</span> <span class="dv">5000</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                          <span class="at">max_file_size =</span> <span class="dv">500</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>                          <span class="at">dev =</span> <span class="cn">FALSE</span>)<span class="er">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="save-your-output">Save your output<a class="anchor" aria-label="anchor" href="#save-your-output"></a>
</h2>
<p>In addition to creating new references on DataStore, the
<code><a href="../reference/bulk_reference_generation.html">bulk_reference_generation()</a></code> function will return a
dataframe in R (in these examples saves as the object
<code>dev_refs</code> or <code>new_refs</code>). This dataframe contains
all the information you supplied in your input.txt file and one
additional column: the DataStore reference ID created for each new
reference.</p>
<p>You may wish to save this file to your current working directory for
later use or your personal records:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readr/man/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="va">new_refs</span>,</span>
<span>                 <span class="st">"new_reference_ids.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="review-and-activate-references">Review and activate references<a class="anchor" aria-label="anchor" href="#review-and-activate-references"></a>
</h2>
<p>You’re not done yet!</p>
<p>You should carefully inspect each reference you create and make sure
each reference gets the appropriate review (peer, technical, or
administrative) as required for that reference. Most references should
at a minimum receive a technical review to make sure the reference is
sound and an administrative review to make sure that, among other
things, sensitive information is not inadvertently being released.</p>
<p>In draft format, only owners will be able to access the draft
references. Reviewers will need to be added to the owner list of each
reference prior to review. You may wish to remove reviewers from the
owners list after the review is complete.</p>
<p>After all the references have been appropriately reviewed, you can
manually navigate to each draft reference on DataStore and click the
“Activate” button to publish them!</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Robert Baker.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
